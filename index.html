<!doctype html>
<html lang="vi">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
    <title>Retro Year-End Night</title>
    <style>
        :root{
            --bg0:#07060a;
            --bg1:#120b10;
            --paper: rgba(255,255,255,.08);
            --paper2: rgba(255,255,255,.12);
            --stroke: rgba(255,255,255,.14);
            --text: rgba(255,255,255,.92);
            --muted: rgba(255,255,255,.72);
            --shadow: 0 24px 90px rgba(0,0,0,.55);

            --sun:#ffb000;
            --red:#ff3b30;
            --teal:#00b7a8;
            --blue:#2f5dff;

            --r:22px;
        }

        *{box-sizing:border-box}
        html,body{height:100%}
        body{
            margin:0;
            font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
            color:var(--text);
            background:
                    radial-gradient(1100px 700px at 20% 0%, rgba(255,176,0,.18), transparent 60%),
                    radial-gradient(1100px 700px at 90% 20%, rgba(0,183,168,.14), transparent 60%),
                    radial-gradient(900px 600px at 50% 100%, rgba(47,93,255,.10), transparent 60%),
                    linear-gradient(180deg, var(--bg1), var(--bg0));
            -webkit-tap-highlight-color: transparent;
        }

        .wrap{
            max-width:980px;
            margin:0 auto;
            padding:16px 16px calc(96px + env(safe-area-inset-bottom));
        }

        /* Top bar */
        .top{
            display:flex; align-items:center; justify-content:space-between; gap:10px;
            padding:8px 4px 12px;
        }
        .brand{
            display:flex; align-items:center; gap:10px;
            font-weight:950; letter-spacing:.12em; text-transform:uppercase;
            font-size:12px; color:rgba(255,255,255,.90);
            white-space:nowrap;
        }
        .badge{
            width:30px;height:30px;border-radius:999px;
            background: conic-gradient(from 220deg, var(--sun), var(--red), var(--teal), var(--sun));
            border:1px solid rgba(255,255,255,.18);
            box-shadow: 0 18px 50px rgba(0,0,0,.6);
        }
        .count{
            padding:8px 10px;
            border-radius:999px;
            border:1px solid rgba(255,255,255,.14);
            background: rgba(0,0,0,.22);
            font-size:12px;
            white-space:nowrap;
            backdrop-filter: blur(10px);
        }

        /* Hero */
        .hero{
            position:relative;
            border-radius: 26px;
            overflow:hidden;
            box-shadow: var(--shadow);
            border:1px solid rgba(255,255,255,.10);
            background: #000;
            isolation:isolate;
        }
        .hero .img{
            height: 56vh;
            min-height: 420px;
            background:
                    linear-gradient(180deg, rgba(0,0,0,.10), rgba(0,0,0,.72)),
                    url('https://images.unsplash.com/photo-1528106963435-2c3b1a0a4b7b?auto=format&fit=crop&w=1600&q=80') center/cover no-repeat;
            transform: scale(1.02);
            filter: saturate(1.08) contrast(1.06);
        }
        .hero:before{
            content:"";
            position:absolute; inset:0;
            background:
                    radial-gradient(700px 420px at 20% 10%, rgba(255,176,0,.18), transparent 60%),
                    radial-gradient(700px 420px at 80% 10%, rgba(0,183,168,.12), transparent 60%),
                    linear-gradient(120deg, rgba(255,59,48,.10), transparent 40%, rgba(47,93,255,.10));
            mix-blend-mode: screen;
            pointer-events:none;
            z-index:1;
        }

        .heroContent{
            position:absolute;
            left:0; right:0; bottom:0;
            padding:16px;
            z-index:2;
        }
        .glass{
            border-radius: 22px;
            padding:16px;
            background: rgba(10,10,14,.40);
            border:1px solid rgba(255,255,255,.14);
            backdrop-filter: blur(12px);
            box-shadow: 0 20px 70px rgba(0,0,0,.45);
        }
        .stamp{
            display:inline-flex; align-items:center; gap:8px;
            padding:7px 10px;
            border-radius:999px;
            border:1px solid rgba(255,255,255,.16);
            background: rgba(255,255,255,.08);
            font-size:12px;
            font-weight:950;
            letter-spacing:.12em;
            text-transform:uppercase;
            width:max-content;
        }
        .dot{
            width:8px;height:8px;border-radius:2px; transform:rotate(12deg);
            background: var(--red);
            box-shadow: 0 0 0 2px rgba(255,255,255,.10);
        }

        h1{
            margin:10px 0 8px;
            font-size: clamp(34px, 9.2vw, 56px);
            line-height:1.02;
            letter-spacing:-.03em;
            text-transform:uppercase;
        }
        .sub{
            margin:0;
            color:rgba(255,255,255,.78);
            font-weight:650;
            font-size:14px;
            max-width: 52ch;
        }

        /* Chips */
        .chips{
            margin-top:12px;
            display:flex;
            flex-wrap:wrap;
            gap:8px;
        }
        .chip{
            display:inline-flex; align-items:center; gap:8px;
            padding:9px 10px;
            border-radius:999px;
            border:1px solid rgba(255,255,255,.14);
            background: rgba(255,255,255,.06);
            color: rgba(255,255,255,.88);
            font-size:13px;
            font-weight:750;
            backdrop-filter: blur(10px);
        }
        .chip b{color:#fff}
        .ico{
            width:18px;height:18px; display:inline-grid; place-items:center;
            border-radius:6px;
            background: rgba(255,255,255,.10);
            border:1px solid rgba(255,255,255,.12);
            font-size:12px;
        }

        /* Detail cards */
        .grid{
            margin-top:14px;
            display:grid;
            grid-template-columns: 1fr;
            gap:12px;
        }
        .card{
            border-radius: var(--r);
            border:1px solid rgba(255,255,255,.14);
            background: rgba(255,255,255,.06);
            backdrop-filter: blur(10px);
            padding:14px;
            box-shadow: 0 18px 60px rgba(0,0,0,.35);
        }
        .card h3{
            margin:0 0 6px;
            font-size:12px;
            letter-spacing:.18em;
            text-transform:uppercase;
            color: rgba(255,255,255,.78);
        }
        .v{margin:0; font-size:16px; font-weight:950}
        .h{margin:8px 0 0; color:rgba(255,255,255,.74); font-size:13px; font-weight:650}

        /* Gallery strip */
        .section-title{
            margin:18px 0 10px;
            display:flex; justify-content:space-between; align-items:end; gap:10px;
        }
        .section-title h2{margin:0; font-size:18px}
        .section-title p{margin:0; font-size:13px; opacity:.78}

        .gallery{
            border-radius: 24px;
            border:1px solid rgba(255,255,255,.14);
            background: rgba(0,0,0,.20);
            padding:12px;
            overflow:hidden;
            box-shadow: var(--shadow);
        }
        .gstrip{
            display:flex;
            gap:10px;
            overflow:auto;
            padding-bottom:6px;
            scroll-snap-type:x mandatory;
            -webkit-overflow-scrolling: touch;
        }
        .thumb{
            flex:0 0 70%;
            max-width:70%;
            border-radius:18px;
            overflow:hidden;
            border:1px solid rgba(255,255,255,.14);
            background: rgba(255,255,255,.06);
            aspect-ratio: 4/3;
            scroll-snap-align:start;
            position:relative;
            cursor:pointer;
        }
        .thumb img{width:100%;height:100%;object-fit:cover;display:block;filter:saturate(1.05) contrast(1.05)}
        .thumb:after{
            content:"";
            position:absolute; inset:0;
            background: linear-gradient(180deg, transparent 55%, rgba(0,0,0,.35));
            pointer-events:none;
        }

        /* Sticky bottom actions */
        .actionbar{
            position:fixed; left:0; right:0; bottom:0;
            padding:10px 12px calc(10px + env(safe-area-inset-bottom));
            background: rgba(0,0,0,.58);
            border-top:1px solid rgba(255,255,255,.12);
            backdrop-filter: blur(10px);
            z-index:60;
        }
        .actions{
            max-width:980px;
            margin:0 auto;
            display:grid;
            grid-template-columns: 1fr;
            gap:10px;
        }
        .btn{
            border-radius:16px;
            border:1px solid rgba(255,255,255,.16);
            background: rgba(255,255,255,.08);
            color: rgba(255,255,255,.92);
            padding:13px 14px;
            cursor:pointer;
            font-weight:950;
            font-size:15px;
            display:inline-flex;
            justify-content:center;
            align-items:center;
            gap:10px;
            text-decoration:none;
            user-select:none;
        }
        .btn:active{transform:translateY(1px)}
        .btn.primary{
            color:#120b10;
            background: linear-gradient(90deg, rgba(255,176,0,.92), rgba(0,183,168,.78));
            border-color: rgba(255,255,255,.10);
        }
        .btnrow{
            display:grid;
            grid-template-columns: 1fr 1fr;
            gap:10px;
        }

        /* Toast */
        .toast{
            position:fixed; left:50%; bottom:92px; transform:translateX(-50%);
            padding:10px 12px;
            border-radius:999px;
            background: rgba(0,0,0,.55);
            border:1px solid rgba(255,255,255,.14);
            color:rgba(255,255,255,.92);
            opacity:0; pointer-events:none;
            transition:opacity .18s ease, transform .18s ease;
            z-index:80;
            backdrop-filter: blur(10px);
        }
        .toast.show{opacity:1; transform:translateX(-50%) translateY(-6px)}

        /* Lightbox */
        .lb{position:fixed; inset:0; background:rgba(0,0,0,.82); display:none; align-items:center; justify-content:center; padding:14px; z-index:100}
        .lb.show{display:flex}
        .lbcard{
            width:min(980px,100%);
            border-radius:22px;
            overflow:hidden;
            border:1px solid rgba(255,255,255,.18);
            background: rgba(0,0,0,.88);
            box-shadow: 0 30px 90px rgba(0,0,0,.80);
            backdrop-filter: blur(10px);
        }
        .lbh{
            display:flex; justify-content:space-between; align-items:center; gap:10px;
            padding:10px 12px;
            border-bottom:1px solid rgba(255,255,255,.12);
        }
        .lbh .nav{display:flex; gap:8px}
        .ib{
            border-radius:14px;
            border:1px solid rgba(255,255,255,.18);
            background: rgba(255,255,255,.08);
            color:#fff;
            padding:9px 11px;
            cursor:pointer;
            font-weight:950;
        }
        .lbimg{width:100%; height:min(70vh,740px); background:#000; touch-action: pan-y;}
        .lbimg img{width:100%; height:100%; object-fit:contain; display:block}

        @media (min-width: 760px){
            .wrap{padding:22px 22px calc(96px + env(safe-area-inset-bottom))}
            .grid{grid-template-columns: repeat(3, 1fr)}
            .thumb{flex-basis: 32%; max-width:32%}
            .actions{grid-template-columns: 1.2fr .8fr}
            .btnrow{grid-template-columns: 1fr 1fr}
            .toast{bottom:102px}
            .hero .img{height: 62vh; min-height: 520px}
        }
        @media (max-width:420px){
            .count{display:none}
            .btnrow{grid-template-columns: 1fr}
            .thumb{flex-basis: 84%; max-width:84%}
        }
    </style>
</head>

<body>
<div class="wrap">
    <div class="top">
        <div class="brand"><span class="badge"></span> Retro Invite</div>
        <div class="count" id="countdown">ƒê·∫øm ng∆∞·ª£c‚Ä¶</div>
    </div>

    <section class="hero">
        <div class="img" aria-hidden="true"></div>

        <div class="heroContent">
            <div class="glass">
                <div class="stamp"><span class="dot"></span><span class="dot"></span><span class="dot"></span> Year End Party</div>
                <h1>Retro<br/>Year-End<br/>Night</h1>
                <p class="sub">Poster vibe nh∆∞ng giao di·ªán hi·ªán ƒë·∫°i ‚Äî m·ªü l√† th·∫•y mu·ªën ƒëi ngay üéûÔ∏è</p>

                <div class="chips">
                    <div class="chip"><span class="ico">üóì</span> <b id="dateChip">20/12/2026</b></div>
                    <div class="chip"><span class="ico">üïó</span> <b id="timeChip">20:00‚Äì23:30</b></div>
                    <div class="chip"><span class="ico">üìç</span> <span id="placeChip">The Pearl Rooftop</span></div>
                    <div class="chip"><span class="ico">üëï</span> Retro / Vintage</div>
                </div>
            </div>
        </div>
    </section>

    <div class="grid">
        <div class="card">
            <h3>Time</h3>
            <p class="v" id="timeValue">20:00 ‚Äì 23:30</p>
            <p class="h">Warm-up 19:30</p>
        </div>
        <div class="card">
            <h3>Location</h3>
            <p class="v" id="locValue">The Pearl Rooftop</p>
            <p class="h" id="addrValue">12 Nguy·ªÖn Hu·ªá, B·∫øn Ngh√©, Q1, TP.HCM</p>
        </div>
        <div class="card">
            <h3>Note</h3>
            <p class="v">Photobooth üéûÔ∏è</p>
            <p class="h">ƒêi s·ªõm ƒë·ªÉ ch·ª•p poster ƒë·∫πp + nh·∫≠n qu√† mini</p>
        </div>
    </div>

    <div class="section-title">
        <h2>Gallery</h2>
        <p>Vu·ªët ngang nh∆∞ story</p>
    </div>

    <section class="gallery">
        <div class="gstrip" id="galleryGrid"></div>
    </section>
</div>

<!-- Sticky CTA -->
<div class="actionbar">
    <div class="actions">
        <a class="btn primary" id="rsvpBtn" href="#">RSVP</a>
        <div class="btnrow">
            <button class="btn" id="copyAddr">Copy ƒë·ªãa ch·ªâ</button>
            <button class="btn" id="addIcs">Add Calendar</button>
        </div>
    </div>
</div>

<div class="toast" id="toast">OK</div>

<div class="lb" id="lightbox" aria-hidden="true">
    <div class="lbcard" role="dialog" aria-modal="true">
        <div class="lbh">
            <div id="lbTitle" style="font-weight:950">·∫¢nh</div>
            <div class="nav">
                <button class="ib" id="prevBtn" aria-label="Previous">‚Üê</button>
                <button class="ib" id="nextBtn" aria-label="Next">‚Üí</button>
                <button class="ib" id="closeBtn" aria-label="Close">‚úï</button>
            </div>
        </div>
        <div class="lbimg" id="lbImgWrap"><img id="lbImg" alt="Preview"/></div>
    </div>
</div>

<script>
    const EVENT = {
        title: "Retro Year-End Night 2026",
        description: "Retro poster vibe ‚Ä¢ Dress code: Retro/Vintage",
        locationName: "The Pearl Rooftop, Qu·∫≠n 1",
        address: "12 Nguy·ªÖn Hu·ªá, B·∫øn Ngh√©, Q1, TP.HCM",
        startLocal: "2026-12-20T20:00",
        endLocal: "2026-12-20T23:30",
        rsvpEmail: "rsvp@example.com",
        rsvpSubject: "RSVP - Retro Year End Night",
        rsvpBody: "M√¨nh x√°c nh·∫≠n tham d·ª±. S·ªë ng∆∞·ªùi ƒëi k√®m: __. Ghi ch√∫: __."
    };

    const GALLERY = [
        "https://unsplash.com/photos/I8JSCNld58Q/download?force=true",
        "https://unsplash.com/photos/3XXkojDxK_g/download?force=true",
        "https://unsplash.com/photos/jXDjKtuatkY/download?force=true",
        "https://unsplash.com/photos/az0rkzG-nHM/download?force=true",
        "https://unsplash.com/photos/swnQTaOz0-o/download?force=true",
        "https://unsplash.com/photos/Xaanw0s0pMk/download?force=true",
        "https://unsplash.com/photos/Z1XKVgPDvgc/download?force=true",
        "https://unsplash.com/photos/H67AHfpKhZk/download?force=true",
        "https://unsplash.com/photos/3Xbl9Rgf6hY/download?force=true",
        "https://unsplash.com/photos/gRTHRJDD9dA/download?force=true",
        "https://unsplash.com/photos/orpdR3ZSwUI/download?force=true",
    ];

    function $(id){return document.getElementById(id);}
    function pad(n){return String(n).padStart(2,"0");}
    function parseLocalToDate(s){
        const [d,t]=s.split("T");
        const [Y,M,D]=d.split("-").map(Number);
        const [hh,mm]=t.split(":").map(Number);
        return new Date(Y,M-1,D,hh,mm,0);
    }
    function toICSDateUTC(date){
        return date.getUTCFullYear()+pad(date.getUTCMonth()+1)+pad(date.getUTCDate())+
            "T"+pad(date.getUTCHours())+pad(date.getUTCMinutes())+pad(date.getUTCSeconds())+"Z";
    }
    function buildICS(){
        const start=parseLocalToDate(EVENT.startLocal);
        const end=parseLocalToDate(EVENT.endLocal);
        const uid="retro-"+Math.random().toString(16).slice(2)+"@local";
        return [
            "BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//LocalInvite//Retro//VI","CALSCALE:GREGORIAN","METHOD:PUBLISH",
            "BEGIN:VEVENT",
            "UID:"+uid,
            "DTSTAMP:"+toICSDateUTC(new Date()),
            "DTSTART:"+toICSDateUTC(start),
            "DTEND:"+toICSDateUTC(end),
            "SUMMARY:"+EVENT.title,
            "DESCRIPTION:"+EVENT.description.replace(/\n/g,"\\n"),
            "LOCATION:"+EVENT.locationName+" - "+EVENT.address,
            "END:VEVENT","END:VCALENDAR"
        ].join("\r\n");
    }
    function download(filename, content, mime){
        const blob=new Blob([content],{type:mime||"text/plain"});
        const url=URL.createObjectURL(blob);
        const a=document.createElement("a"); a.href=url; a.download=filename;
        document.body.appendChild(a); a.click(); a.remove();
        setTimeout(()=>URL.revokeObjectURL(url),800);
    }
    function showToast(msg){
        const t=$("toast"); t.textContent=msg;
        t.classList.add("show"); clearTimeout(showToast._tm);
        showToast._tm=setTimeout(()=>t.classList.remove("show"), 1500);
    }

    // Lightbox + swipe
    let cur=0;
    function openLB(i){
        cur=i;
        $("lbTitle").textContent=`·∫¢nh ${cur+1}/${GALLERY.length}`;
        $("lbImg").src=GALLERY[cur];
        $("lightbox").classList.add("show");
        $("lightbox").setAttribute("aria-hidden","false");
    }
    function closeLB(){
        $("lightbox").classList.remove("show");
        $("lightbox").setAttribute("aria-hidden","true");
    }
    function next(){ openLB((cur+1)%GALLERY.length); }
    function prev(){ openLB((cur-1+GALLERY.length)%GALLERY.length); }

    (function init(){
        const start=parseLocalToDate(EVENT.startLocal);
        const end=parseLocalToDate(EVENT.endLocal);

        $("dateChip").textContent = `${pad(start.getDate())}/${pad(start.getMonth()+1)}/${start.getFullYear()}`;
        $("timeChip").textContent = `${pad(start.getHours())}:${pad(start.getMinutes())}‚Äì${pad(end.getHours())}:${pad(end.getMinutes())}`;
        $("placeChip").textContent = EVENT.locationName;

        $("timeValue").textContent = `${pad(start.getHours())}:${pad(start.getMinutes())} ‚Äì ${pad(end.getHours())}:${pad(end.getMinutes())}`;
        $("locValue").textContent = EVENT.locationName;
        $("addrValue").textContent = EVENT.address;

        const mailto="mailto:"+encodeURIComponent(EVENT.rsvpEmail)
            +"?subject="+encodeURIComponent(EVENT.rsvpSubject)
            +"&body="+encodeURIComponent(EVENT.rsvpBody);
        $("rsvpBtn").href=mailto;

        $("copyAddr").addEventListener("click", async ()=>{
            const text=`${EVENT.locationName} - ${EVENT.address}`;
            try{ await navigator.clipboard.writeText(text); showToast("ƒê√£ copy ƒë·ªãa ch·ªâ!"); }
            catch(e){
                const ta=document.createElement("textarea");
                ta.value=text; document.body.appendChild(ta); ta.select(); document.execCommand("copy"); ta.remove();
                showToast("ƒê√£ copy!");
            }
        });

        $("addIcs").addEventListener("click", ()=>{
            download("year-end-party.ics", buildICS(), "text/calendar;charset=utf-8");
            showToast("ƒê√£ t·∫£i .ics");
        });

        const strip=$("galleryGrid");
        GALLERY.forEach((src, idx)=>{
            const d=document.createElement("div");
            d.className="thumb";
            d.innerHTML=`<img loading="lazy" alt="Gallery ${idx+1}" src="${src}">`;
            d.addEventListener("click", ()=>openLB(idx));
            strip.appendChild(d);
        });

        // Countdown
        const c=$("countdown");
        function tick(){
            const diff=start-new Date();
            if(diff<=0){ c.textContent="Showtime üéûÔ∏è"; return; }
            const s=Math.floor(diff/1000);
            const d=Math.floor(s/86400), h=Math.floor((s%86400)/3600), m=Math.floor((s%3600)/60);
            c.textContent=`ƒê·∫øm ng∆∞·ª£c: ${d}d ${h}h ${m}m`;
        }
        tick(); setInterval(tick, 30000);

        $("lightbox").addEventListener("click",(e)=>{ if(e.target===$("lightbox")) closeLB();});
        $("closeBtn").addEventListener("click", closeLB);
        $("nextBtn").addEventListener("click", next);
        $("prevBtn").addEventListener("click", prev);
        window.addEventListener("keydown",(e)=>{
            if(!$("lightbox").classList.contains("show")) return;
            if(e.key==="Escape") closeLB();
            if(e.key==="ArrowRight") next();
            if(e.key==="ArrowLeft") prev();
        });

        // Swipe
        const wrap=$("lbImgWrap");
        let sx=0, dx=0, touching=false;
        wrap.addEventListener("touchstart",(e)=>{
            if(e.touches.length!==1) return;
            touching=true; sx=e.touches[0].clientX; dx=0;
        }, {passive:true});
        wrap.addEventListener("touchmove",(e)=>{
            if(!touching) return;
            dx=e.touches[0].clientX-sx;
        }, {passive:true});
        wrap.addEventListener("touchend",()=>{
            if(!touching) return;
            touching=false;
            if(Math.abs(dx)>45){ dx<0 ? next() : prev(); }
        }, {passive:true});
    })();
</script>
</body>
</html>
